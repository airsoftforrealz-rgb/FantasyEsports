import { NextRequest, NextResponse } from 'next/server'; import { prisma } from '@/lib/db/prisma';
export async function POST(req:NextRequest){ const {draftId,userId,playerId}=await req.json(); const draft=await prisma.draft.findUnique({where:{id:draftId}}); if(!draft)return NextResponse.json({success:false,error:'No draft'},{status:404}); const pick=await prisma.draftPick.create({data:{draftId,userId,playerId,pickNumber:draft.currentPick}}); await prisma.draft.update({where:{id:draftId},data:{currentPick:draft.currentPick+1}}); return NextResponse.json({success:true,data:pick}); }
